<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game SVT - Mission 6√®me</title>
    <style>
        /* --- STYLE DU JEU --- */
        body {
            font-family: 'Verdana', sans-serif; /* Police plus lisible */
            background-color: #212121;
            color: #eceff1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        .game-container {
            background-color: #37474f;
            border-top: 5px solid #29b6f6; /* Touche de bleu science */
            border-radius: 8px;
            padding: 30px;
            max-width: 650px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
        }

        h1 { color: #29b6f6; font-size: 1.8em; margin-bottom: 10px; }
        h2 { color: #81d4fa; margin-bottom: 20px; font-size: 1.4em; }
        
        /* Barre de progression */
        .progress-bar {
            height: 5px;
            background: #546e7a;
            margin-bottom: 20px;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #29b6f6;
            width: 0%;
            transition: width 0.5s;
        }

        .hidden { display: none; }

        .btn {
            background-color: #29b6f6;
            color: #000;
            font-weight: bold;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: transform 0.2s, background 0.2s;
        }
        .btn:hover { background-color: #039be5; transform: scale(1.02); }

        .btn-choice {
            display: block;
            width: 100%;
            margin: 10px 0;
            background-color: #455a64;
            color: white;
            padding: 15px;
            border: 1px solid #607d8b;
            text-align: left;
            border-radius: 6px;
        }
        .btn-choice:hover { background-color: #546e7a; border-color: #29b6f6; }

        input[type="text"] {
            padding: 15px;
            font-size: 20px;
            border-radius: 5px;
            border: 2px solid #29b6f6;
            background: #263238;
            color: white;
            text-align: center;
            width: 150px;
            letter-spacing: 5px;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            min-height: 30px;
            padding: 10px;
            border-radius: 4px;
        }
        .error { background-color: rgba(255, 82, 82, 0.2); color: #ff8a80; }
        .success { background-color: rgba(102, 187, 106, 0.2); color: #a5d6a7; }

        .clue-box {
            background: #263238;
            padding: 15px;
            border-left: 4px solid #ffa726; /* Orange pour l'indice */
            text-align: left;
            margin-bottom: 20px;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .code-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2em;
            background: #000;
            padding: 10px;
            border-radius: 5px;
            color: #00e676;
            margin: 5px 0;
        }
    </style>
</head>
<body>

<div class="game-container">
    
    <div class="progress-bar"><div id="prog-fill" class="progress-fill"></div></div>

    <div id="screen-intro">
        <h1>üî¨ Mission Biosph√®re</h1>
        <p>Bonjour jeune scientifique. Le syst√®me de s√©curit√© du laboratoire s'est verrouill√©. </p>
        <p>Pour sortir, tu vas devoir parcourir les <strong>5 grands th√®mes</strong> de ton ann√©e de 6√®me.</p>
        <p>Chaque bonne r√©ponse te donnera une partie du <strong>CODE FINAL √† 4 chiffres</strong>.</p>
        <button class="btn" onclick="startGame()">Entrer dans le labo</button>
    </div>

    <div id="screen-q1" class="hidden">
        <h2>Niveau 1 : L'infiniment petit</h2>
        <div class="clue-box">
            <p>Tu observes une peau d'oignon au microscope. Tu vois des petites "briques" coll√©es les unes aux autres.</p>
            <p><strong>Question :</strong> Quel est le nom scientifique de ces "briques" qui constituent tous les √™tres vivants ?</p>
        </div>
        <button class="btn btn-choice" onclick="checkAnswer(1, 'atome')">A) Des atomes</button>
        <button class="btn btn-choice" onclick="checkAnswer(1, 'cellule')">B) Des cellules</button>
        <button class="btn btn-choice" onclick="checkAnswer(1, 'bacterie')">C) Des bact√©ries</button>
        <div id="feed1" class="feedback"></div>
    </div>

    <div id="screen-q2" class="hidden">
        <h2>Niveau 2 : Qui est-ce ?</h2>
        <div class="clue-box">
            <p>Tu trouves un animal inconnu dans la cour. Il poss√®de :</p>
            <ul>
                <li>Des yeux et une bouche</li>
                <li>Un squelette externe</li>
                <li>8 pattes articul√©es</li>
            </ul>
            <p><strong>Question :</strong> Dans quel groupe dois-tu le classer ?</p>
        </div>
        <button class="btn btn-choice" onclick="checkAnswer(2, 'insecte')">A) Les Insectes</button>
        <button class="btn btn-choice" onclick="checkAnswer(2, 'arachnide')">B) Les Arachnides</button>
        <button class="btn btn-choice" onclick="checkAnswer(2, 'myriapode')">C) Les Myriapodes (Mille-pattes)</button>
        <div id="feed2" class="feedback"></div>
    </div>

    <div id="screen-q3" class="hidden">
        <h2>Niveau 3 : Le cycle de la vie</h2>
        <div class="clue-box">
            <p>Au printemps, tu plantes des graines de haricot. Pour qu'elles germent, tu as pr√©par√© plusieurs pots.</p>
            <p><strong>Question :</strong> Quelle condition est INUTILE pour la simple germination de la graine (le tout d√©but) ?</p>
        </div>
        <button class="btn btn-choice" onclick="checkAnswer(3, 'eau')">A) L'eau</button>
        <button class="btn btn-choice" onclick="checkAnswer(3, 'chaleur')">B) La chaleur</button>
        <button class="btn btn-choice" onclick="checkAnswer(3, 'lumiere')">C) La lumi√®re</button>
        <div id="feed3" class="feedback"></div>
    </div>

    <div id="screen-q4" class="hidden">
        <h2>Niveau 4 : Sous nos pieds</h2>
        <div class="clue-box">
            <p>Dans la liti√®re du sol, les feuilles mortes disparaissent peu √† peu. Elles sont transform√©es en mati√®re min√©rale (terreau).</p>
            <p><strong>Question :</strong> Qui est responsable de cette transformation ?</p>
        </div>
        <button class="btn btn-choice" onclick="checkAnswer(4, 'decomposeur')">A) Les d√©composeurs</button>
        <button class="btn btn-choice" onclick="checkAnswer(4, 'producteur')">B) Les producteurs</button>
        <button class="btn btn-choice" onclick="checkAnswer(4, 'pluie')">C) La pluie uniquement</button>
        <div id="feed4" class="feedback"></div>
    </div>

    <div id="screen-q5" class="hidden">
        <h2>Niveau 5 : Dans la cuisine</h2>
        <div class="clue-box">
            <p>Pour fabriquer du pain, le boulanger m√©lange de la farine, de l'eau, du sel et... de la levure.</p>
            <p><strong>Question :</strong> Qu'est-ce que la levure ?</p>
        </div>
        <button class="btn btn-choice" onclick="checkAnswer(5, 'chimique')">A) Une poudre chimique</button>
        <button class="btn btn-choice" onclick="checkAnswer(5, 'micro')">B) Un microorganisme vivant</button>
        <button class="btn btn-choice" onclick="checkAnswer(5, 'graine')">C) Une graine microscopique</button>
        <div id="feed5" class="feedback"></div>
    </div>

    <div id="screen-final" class="hidden">
        <h2>üîí Digicode de Sortie</h2>
        <p>Tu as rassembl√© tous les indices.</p>
        
        <div style="text-align:left; background:#37474f; padding:10px;">
            <p>1. Le chiffre de la Cellule : <strong id="code1" style="color:#29b6f6">?</strong></p>
            <p>2. Le chiffre des Arachnides : <strong id="code2" style="color:#29b6f6">?</strong></p>
            <p>3. Le chiffre de la Germination : <strong id="code3" style="color:#29b6f6">?</strong></p>
            <p>4. Le chiffre des D√©composeurs : <strong id="code4" style="color:#29b6f6">?</strong></p>
        </div>

        <p>Entre le code complet (4 chiffres) :</p>
        <input type="text" id="finalInput" placeholder="????" maxlength="4">
        <br>
        <button class="btn" onclick="checkFinalCode()">VALIDER</button>
        <div id="finalFeedback" class="feedback"></div>
    </div>

    <div id="screen-win" class="hidden">
        <h1>üéâ LIBRE !</h1>
        <p>F√©licitations ! Tu as valid√© tes acquis de 6√®me.</p>
        <p>Le laboratoire est ouvert.</p>
        <div style="font-size: 40px; margin: 20px;">üîì</div>
        <button class="btn" onclick="location.reload()">Recommencer</button>
    </div>

</div>

<script>
    // --- CONFIGURATION DU JEU ---
    // Codes √† gagner pour chaque question r√©ussie (servent √† construire le code final)
    // Q1 Cellule -> chiffre 1
    // Q2 Arachnide -> chiffre 8
    // Q3 Lumi√®re (le pi√®ge) -> chiffre 0
    // Q4 D√©composeurs -> chiffre 5
    // CODE FINAL = 1805
    
    let codes = {
        q1: "?",
        q2: "?",
        q3: "?",
        q4: "?"
    };

    function updateProgressBar(percent) {
        document.getElementById('prog-fill').style.width = percent + '%';
    }

    function startGame() {
        document.getElementById('screen-intro').classList.add('hidden');
        document.getElementById('screen-q1').classList.remove('hidden');
        updateProgressBar(10);
    }

    // Fonction g√©n√©rique pour v√©rifier les r√©ponses
    function checkAnswer(level, answer) {
        const feedbackDiv = document.getElementById('feed' + level);
        let isCorrect = false;
        let msg = "";
        let codeWon = "";

        // LOGIQUE DES R√âPONSES
        if (level === 1) { // Cellule
            if (answer === 'cellule') {
                isCorrect = true;
                msg = "Bravo ! Tous les √™tres vivants sont faits de cellules. Tu gagnes le chiffre 1.";
                codes.q1 = "1";
            } else {
                msg = "Faux. L'atome est mati√®re non-vivante, la bact√©rie est une cellule mais l'oignon n'est pas une bact√©rie.";
            }
        } 
        else if (level === 2) { // Classification
            if (answer === 'arachnide') {
                isCorrect = true;
                msg = "Exact ! 8 pattes = Arachnides (Araign√©es, Scorpions...). Tu gagnes le chiffre 8.";
                codes.q2 = "8";
            } else {
                msg = "Non. Les insectes ont 6 pattes. Les myriapodes en ont beaucoup plus.";
            }
        }
        else if (level === 3) { // Germination
            if (answer === 'lumiere') {
                isCorrect = true;
                msg = "Bien jou√© ! La graine a ses propres r√©serves, elle n'a pas besoin de lumi√®re au d√©but (elle est sous terre !). Tu gagnes le chiffre 0.";
                codes.q3 = "0";
            } else {
                msg = "Erreur ! L'eau et la chaleur sont OBLIGATOIRES pour r√©veiller la graine.";
            }
        }
        else if (level === 4) { // Sol
            if (answer === 'decomposeur') {
                isCorrect = true;
                msg = "Correct ! Ils recyclent la mati√®re organique en mati√®re min√©rale. Tu gagnes le chiffre 5.";
                codes.q4 = "5";
            } else {
                msg = "Faux. Les producteurs sont les plantes vertes.";
            }
        }
        else if (level === 5) { // Cuisine (Pas de chiffre, juste l'acc√®s final)
            if (answer === 'micro') {
                isCorrect = true;
                msg = "Excellent ! C'est un champignon microscopique qui transforme les sucres.";
                // Pas de chiffre ici, mais on d√©clenche la fin
            } else {
                msg = "Non, ce n'est pas chimique. C'est du vivant !";
            }
        }

        // AFFICHAGE DU R√âSULTAT
        if (isCorrect) {
            feedbackDiv.innerHTML = `<div class='success'>${msg}</div>`;
            // Attendre 2 secondes puis passer √† la suite
            setTimeout(() => {
                document.getElementById('screen-q' + level).classList.add('hidden');
                
                if (level < 5) {
                    document.getElementById('screen-q' + (level + 1)).classList.remove('hidden');
                    updateProgressBar(level * 20);
                } else {
                    // Aller √† l'√©cran final
                    showFinalScreen();
                }
            }, 2500);
        } else {
            feedbackDiv.innerHTML = `<div class='error'>${msg}</div>`;
        }
    }

    function showFinalScreen() {
        document.getElementById('screen-final').classList.remove('hidden');
        updateProgressBar(100);
        
        // Remplir les indices
        document.getElementById('code1').innerText = codes.q1;
        document.getElementById('code2').innerText = codes.q2;
        document.getElementById('code3').innerText = codes.q3;
        document.getElementById('code4').innerText = codes.q4;
    }

    function checkFinalCode() {
        const input = document.getElementById('finalInput').value;
        // Le code est 1805
        if (input === "1805") {
            document.getElementById('screen-final').classList.add('hidden');
            document.getElementById('screen-win').classList.remove('hidden');
        } else {
            document.getElementById('finalFeedback').innerHTML = "<div class='error'>Code Incorrect. Regarde bien les indices !</div>";
        }
    }
</script>

</body>
</html>
